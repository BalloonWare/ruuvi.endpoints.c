
<html>
<head>

  <meta http-equiv="Content-Type" content="text/html; charset=US-ASCII" />
  <title>ruuvi_endpoint_5.c</title>

  <link rel="stylesheet" href="../style.css"/>
  <script src="../jquery-3.5.1.min.js"></script>
</head>
<body>

<pre><code class = "cpp">
<a name="ln1">#include &quot;ruuvi_endpoint_5.h&quot;</a>
<a name="ln2">#include &quot;ruuvi_endpoints.h&quot;</a>
<a name="ln3">#include &lt;stddef.h&gt;</a>
<a name="ln4">#include &lt;stdbool.h&gt;</a>
<a name="ln5">#include &lt;string.h&gt;</a>
<a name="ln6">#include &lt;math.h&gt;</a>
<a name="ln7"> </a>
<a name="ln8">#define RE_5_ENCODE_ACC_CONVERT_RATIO       1000</a>
<a name="ln9">#define RE_5_ENCODE_HUMIDITY_CONVERT_RATIO  400</a>
<a name="ln10">#define RE_5_ENCODE_TEMP_CONVERT_RATIO      200</a>
<a name="ln11">#define RE_5_ENCODE_PRESSURE_INIT_OFFSET    50000</a>
<a name="ln12">#define RE_5_ENCODE_BATTERY_CONVERT_RATIO   1000</a>
<a name="ln13">#define RE_5_ENCODE_BATTERY_CONVERT_OFFSET  1600</a>
<a name="ln14">#define RE_5_ENCODE_BATTERY_MIN             1.6</a>
<a name="ln15"> </a>
<a name="ln16">#define RE_5_ENCODE_TX_POWER_MAX            24</a>
<a name="ln17">#define RE_5_ENCODE_TX_POWER_MIN            -40</a>
<a name="ln18">#define RE_5_ENCODE_TX_POWER_STEP           2</a>
<a name="ln19">#define RE_5_ENCODE_TX_POWER_OFFSET         40</a>
<a name="ln20"> </a>
<a name="ln21">#define RE_5_ENCODE_MOVEMENT_COUNT_MAX      254</a>
<a name="ln22">#define RE_5_ENCODE_MOVEMENT_COUNT_MIN      0</a>
<a name="ln23"> </a>
<a name="ln24">#define RE_5_ENCODE_MEASUREMENT_SEQ_MAX     65534</a>
<a name="ln25">#define RE_5_ENCODE_MEASUREMENT_SEQ_MIN     0</a>
<a name="ln26"> </a>
<a name="ln27">#define RE_5_ENCODE_MAC_MAX                 281474976710655</a>
<a name="ln28">#define RE_5_ENCODE_MAC_MIN                 0</a>
<a name="ln29"> </a>
<a name="ln30">#define RE_5_BYTE_OFFSET                    8</a>
<a name="ln31">#define RE_5_BYTE_2_OFFSET                  16</a>
<a name="ln32">#define RE_5_BYTE_3_OFFSET                  24</a>
<a name="ln33">#define RE_5_BYTE_4_OFFSET                  32</a>
<a name="ln34">#define RE_5_BYTE_5_OFFSET                  40</a>
<a name="ln35">#define RE_5_BYTE_MASK                      0xFF</a>
<a name="ln36">#define RE_5_BYTE_VOLTAGE_OFFSET            5</a>
<a name="ln37"> </a>
<a name="ln38">static void re_5_encode_acceleration (uint8_t * const buffer,</a>
<a name="ln39">                                      const re_float acceleration)</a>
<a name="ln40">{</a>
<a name="ln41">    uint16_t decimal = RE_5_INVALID_ACCELERATION;</a>
<a name="ln42"> </a>
<a name="ln43">    if (!isnan (acceleration))</a>
<a name="ln44">    {</a>
<a name="ln45">        // convert to mG</a>
<a name="ln46">        decimal = (uint16_t) ( (int16_t) ( (re_float) round (acceleration *</a>
<a name="ln47">                                           RE_5_ENCODE_ACC_CONVERT_RATIO)));</a>
<a name="ln48">    }</a>
<a name="ln49"> </a>
<a name="ln50">    buffer[0] = (decimal &gt;&gt; RE_5_BYTE_OFFSET);</a>
<a name="ln51">    buffer[1] = (decimal &amp; RE_5_BYTE_MASK);</a>
<a name="ln52">}</a>
<a name="ln53"> </a>
<a name="ln54">static void re_5_encode_set_address (uint8_t * const buffer,</a>
<a name="ln55">                                     const re_5_data_t * data)</a>
<a name="ln56">{</a>
<a name="ln57">    // Address is 64 bits, skip 2 first bytes</a>
<a name="ln58">    uint8_t address_offset = 0;</a>
<a name="ln59">    uint64_t mac = data-&gt;address;</a>
<a name="ln60"> </a>
<a name="ln61">    if ( (RE_5_ENCODE_MAC_MAX &lt; data-&gt;address) ||</a>
<a name="ln62">            (RE_5_ENCODE_MAC_MIN &gt; data-&gt;address))</a>
<a name="ln63">    {</a>
<a name="ln64">        mac = RE_5_INVALID_MAC;</a>
<a name="ln65">    }</a>
<a name="ln66"> </a>
<a name="ln67">    buffer[RE_5_OFFSET_ADDRESS_MSB + address_offset] =</a>
<a name="ln68">        (mac &gt;&gt; RE_5_BYTE_5_OFFSET) &amp; RE_5_BYTE_MASK;</a>
<a name="ln69">    address_offset++;</a>
<a name="ln70">    buffer[RE_5_OFFSET_ADDRESS_MSB + address_offset] =</a>
<a name="ln71">        (data-&gt;address &gt;&gt; RE_5_BYTE_4_OFFSET) &amp; RE_5_BYTE_MASK;</a>
<a name="ln72">    address_offset++;</a>
<a name="ln73">    buffer[RE_5_OFFSET_ADDRESS_MSB + address_offset] =</a>
<a name="ln74">        (mac &gt;&gt; RE_5_BYTE_3_OFFSET) &amp; RE_5_BYTE_MASK;</a>
<a name="ln75">    address_offset++;</a>
<a name="ln76">    buffer[RE_5_OFFSET_ADDRESS_MSB + address_offset] =</a>
<a name="ln77">        (mac &gt;&gt; RE_5_BYTE_2_OFFSET) &amp; RE_5_BYTE_MASK;</a>
<a name="ln78">    address_offset++;</a>
<a name="ln79">    buffer[RE_5_OFFSET_ADDRESS_MSB + address_offset] =</a>
<a name="ln80">        (mac &gt;&gt; RE_5_BYTE_OFFSET) &amp; RE_5_BYTE_MASK;</a>
<a name="ln81">    address_offset++;</a>
<a name="ln82">    buffer[RE_5_OFFSET_ADDRESS_MSB + address_offset] =</a>
<a name="ln83">        (mac &gt;&gt; 0) &amp; RE_5_BYTE_MASK;</a>
<a name="ln84">}</a>
<a name="ln85"> </a>
<a name="ln86">static void re_5_encode_data (uint8_t * const buffer,</a>
<a name="ln87">                              const re_5_data_t * data)</a>
<a name="ln88">{</a>
<a name="ln89">    buffer[RE_5_OFFSET_HEADER] = RE_5_DESTINATION;</a>
<a name="ln90">    uint16_t humidity = RE_5_INVALID_HUMIDITY;</a>
<a name="ln91"> </a>
<a name="ln92">    if ( (!isnan (data-&gt;humidity_rh)) &amp;&amp;</a>
<a name="ln93">            (0 &lt;= data-&gt;humidity_rh))</a>
<a name="ln94">    {</a>
<a name="ln95">        // Humidity (16bit unsigned) in 0.0025% (0-163.83% range,</a>
<a name="ln96">        // though realistically 0-100%)</a>
<a name="ln97">        humidity = (uint16_t) ( (re_float) round (data-&gt;humidity_rh *</a>
<a name="ln98">                                RE_5_ENCODE_HUMIDITY_CONVERT_RATIO));</a>
<a name="ln99">    }</a>
<a name="ln100"> </a>
<a name="ln101">    buffer[RE_5_OFFSET_HUMIDITY_MSB] = (humidity &gt;&gt; RE_5_BYTE_OFFSET);</a>
<a name="ln102">    buffer[RE_5_OFFSET_HUMIDITY_LSB] = humidity &amp; RE_5_BYTE_MASK;</a>
<a name="ln103">    // Temperature is in 0.005 degrees</a>
<a name="ln104">    uint16_t temperature = RE_5_INVALID_TEMPERATURE;</a>
<a name="ln105"> </a>
<a name="ln106">    if (!isnan (data-&gt;temperature_c))</a>
<a name="ln107">    {</a>
<a name="ln108">        temperature = (uint16_t) ( (int16_t) ( (re_float) round (data-&gt;temperature_c *</a>
<a name="ln109">                                               RE_5_ENCODE_TEMP_CONVERT_RATIO)));</a>
<a name="ln110">    }</a>
<a name="ln111"> </a>
<a name="ln112">    buffer[RE_5_OFFSET_TEMPERATURE_MSB] = (temperature &gt;&gt;</a>
<a name="ln113">                                           RE_5_BYTE_OFFSET);</a>
<a name="ln114">    buffer[RE_5_OFFSET_TEMPERATURE_LSB] = (temperature &amp;</a>
<a name="ln115">                                           RE_5_BYTE_MASK);</a>
<a name="ln116">    // Pressure</a>
<a name="ln117">    uint32_t pressure = RE_5_INVALID_PRESSURE;</a>
<a name="ln118"> </a>
<a name="ln119">    if ( (!isnan (data-&gt;pressure_pa)) &amp;&amp;</a>
<a name="ln120">            (RE_5_ENCODE_PRESSURE_INIT_OFFSET &lt;= data-&gt;pressure_pa))</a>
<a name="ln121">    {</a>
<a name="ln122">        pressure = (uint32_t) data-&gt;pressure_pa;</a>
<a name="ln123">        pressure -= RE_5_ENCODE_PRESSURE_INIT_OFFSET;</a>
<a name="ln124">    }</a>
<a name="ln125"> </a>
<a name="ln126">    buffer[RE_5_OFFSET_PRESSURE_MSB] = (pressure &gt;&gt; RE_5_BYTE_OFFSET) &amp;</a>
<a name="ln127">                                       RE_5_BYTE_MASK;</a>
<a name="ln128">    buffer[RE_5_OFFSET_PRESSURE_LSB] = (pressure  &amp; RE_5_BYTE_MASK);</a>
<a name="ln129">    // acceleration</a>
<a name="ln130">    re_5_encode_acceleration (&amp;buffer[RE_5_OFFSET_ACCELERATIONX_MSB],</a>
<a name="ln131">                              data-&gt;accelerationx_g);</a>
<a name="ln132">    re_5_encode_acceleration (&amp;buffer[RE_5_OFFSET_ACCELERATIONY_MSB],</a>
<a name="ln133">                              data-&gt;accelerationy_g);</a>
<a name="ln134">    re_5_encode_acceleration (&amp;buffer[RE_5_OFFSET_ACCELERATIONZ_MSB],</a>
<a name="ln135">                              data-&gt;accelerationz_g);</a>
<a name="ln136">    // voltage, tx power</a>
<a name="ln137">    uint16_t voltage = RE_5_INVALID_VOLTAGE;</a>
<a name="ln138">    int8_t tx_power = RE_5_INVALID_POWER;</a>
<a name="ln139"> </a>
<a name="ln140">    if ( (!isnan (data-&gt;battery_v)) &amp;&amp;</a>
<a name="ln141">            (RE_5_ENCODE_BATTERY_MIN &lt;= data-&gt;battery_v))</a>
<a name="ln142">    {</a>
<a name="ln143">        // first 11 bits unsigned is the battery voltage above 1.6V,</a>
<a name="ln144">        // in millivolts (1.6V to 3.647V range)</a>
<a name="ln145">        voltage = (uint16_t) ( (re_float) round ( (data-&gt;battery_v *</a>
<a name="ln146">                               RE_5_ENCODE_BATTERY_CONVERT_RATIO) -</a>
<a name="ln147">                               RE_5_ENCODE_BATTERY_CONVERT_OFFSET));</a>
<a name="ln148">    }</a>
<a name="ln149"> </a>
<a name="ln150">    if ( (RE_5_INVALID_POWER != data-&gt;tx_power) &amp;&amp;</a>
<a name="ln151">            (data-&gt;tx_power &gt;= RE_5_ENCODE_TX_POWER_MIN) &amp;&amp;</a>
<a name="ln152">            (data-&gt;tx_power &lt;= RE_5_ENCODE_TX_POWER_MAX))</a>
<a name="ln153">    {</a>
<a name="ln154">        // Last 5 bits unsigned is the TX power above -40dBm,</a>
<a name="ln155">        // in 2dBm steps. (-40dBm to +24dBm range)</a>
<a name="ln156">        tx_power = (int8_t) ( (data-&gt;tx_power +</a>
<a name="ln157">                               RE_5_ENCODE_TX_POWER_OFFSET) /</a>
<a name="ln158">                              RE_5_ENCODE_TX_POWER_STEP);</a>
<a name="ln159">    }</a>
<a name="ln160"> </a>
<a name="ln161">    uint16_t power_info = ( (uint16_t) (voltage &lt;&lt; RE_5_BYTE_VOLTAGE_OFFSET)) +</a>
<a name="ln162">                          tx_power;</a>
<a name="ln163">    buffer[RE_5_OFFSET_POWER_MSB] = (power_info &gt;&gt; RE_5_BYTE_OFFSET);</a>
<a name="ln164">    buffer[RE_5_OFFSET_POWER_LSB] = (power_info &amp; RE_5_BYTE_MASK);</a>
<a name="ln165">    uint8_t movement_count = data-&gt;movement_count;</a>
<a name="ln166"> </a>
<a name="ln167">    if ( (RE_5_ENCODE_MOVEMENT_COUNT_MAX &lt; data-&gt;movement_count) ||</a>
<a name="ln168">            (RE_5_ENCODE_MOVEMENT_COUNT_MIN &gt; data-&gt;movement_count))</a>
<a name="ln169">    {</a>
<a name="ln170">        movement_count = RE_5_INVALID_MOVEMENT;</a>
<a name="ln171">    }</a>
<a name="ln172"> </a>
<a name="ln173">    buffer[RE_5_OFFSET_MOVEMENT_COUNTER] = movement_count;</a>
<a name="ln174">    uint16_t measurement_seq = data-&gt;measurement_count;</a>
<a name="ln175"> </a>
<a name="ln176">    if ( (RE_5_ENCODE_MEASUREMENT_SEQ_MAX &lt; data-&gt;measurement_count) ||</a>
<a name="ln177">            (RE_5_ENCODE_MEASUREMENT_SEQ_MIN &gt; data-&gt;measurement_count))</a>
<a name="ln178">    {</a>
<a name="ln179">        measurement_seq = RE_5_INVALID_SEQUENCE;</a>
<a name="ln180">    }</a>
<a name="ln181"> </a>
<a name="ln182">    buffer[RE_5_OFFSET_SEQUENCE_COUNTER_MSB] = (measurement_seq &gt;&gt;</a>
<a name="ln183">            RE_5_BYTE_OFFSET);</a>
<a name="ln184">    buffer[RE_5_OFFSET_SEQUENCE_COUNTER_LSB] = (measurement_seq &amp;</a>
<a name="ln185">            RE_5_BYTE_MASK);</a>
<a name="ln186">    re_5_encode_set_address (buffer, data);</a>
<a name="ln187">}</a>
<a name="ln188"> </a>
<a name="ln189">re_status_t re_5_encode (uint8_t * const buffer,</a>
<a name="ln190">                         const re_5_data_t * data)</a>
<a name="ln191">{</a>
<a name="ln192">    re_status_t result = RE_SUCCESS;</a>
<a name="ln193"> </a>
<a name="ln194">    if ( (NULL == buffer) ||</a>
<a name="ln195">            (NULL == data))</a>
<a name="ln196">    {</a>
<a name="ln197">        result = RE_ERROR_NULL;</a>
<a name="ln198">    }</a>
<a name="ln199">    else</a>
<a name="ln200">    {</a>
<a name="ln201">        re_5_encode_data (buffer, data);</a>
<a name="ln202">    }</a>
<a name="ln203"> </a>
<a name="ln204">    return result;</a>
<a name="ln205">}</a>

</code></pre>
<div class="balloon" rel="43"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2544/" target="_blank">V2544</a> The '__builtin_isnan(acceleration)' operand of the '!' operator should not have the essential 'signed' type.</p></div>
<div class="balloon" rel="43"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2570/" target="_blank">V2570</a> Operands of the '!' operator should have bool essential type.</p></div>
<div class="balloon" rel="46"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2568/" target="_blank">V2568</a> Both operands of the '*' operator should have the same essential type. The current types are: 'floating' and 'signed'.</p></div>
<div class="balloon" rel="46"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2003/" target="_blank">V2003</a> Explicit conversion from 'float' type to signed integer type.</p></div>
<div class="balloon" rel="50"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2572/" target="_blank">V2572</a> The value of the '(decimal >> 8)' expression should not be converted from the essential 'signed' type to the essential 'unsigned' type.</p></div>
<div class="balloon" rel="50"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2568/" target="_blank">V2568</a> Both operands of the '=' operator should have the same essential type. The current types are: 'unsigned' and 'signed'.</p></div>
<div class="balloon" rel="51"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2568/" target="_blank">V2568</a> Both operands of the '&' operator should have the same essential type. The current types are: 'unsigned' and 'signed'.</p></div>
<div class="balloon" rel="51"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2544/" target="_blank">V2544</a> The right operand '0xFF' of the '&' operator should not have the essential 'signed' type.</p></div>
<div class="balloon" rel="51"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2572/" target="_blank">V2572</a> The value of the '(decimal & 0xFF)' expression should not be converted from the essential 'signed' type to the essential 'unsigned' type.</p></div>
<div class="balloon" rel="51"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2568/" target="_blank">V2568</a> Both operands of the '=' operator should have the same essential type. The current types are: 'unsigned' and 'signed'.</p></div>
<div class="balloon" rel="61"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2568/" target="_blank">V2568</a> Both operands of the '<' operator should have the same essential type. The current types are: 'signed' and 'unsigned'.</p></div>
<div class="balloon" rel="62"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2568/" target="_blank">V2568</a> Both operands of the '>' operator should have the same essential type. The current types are: 'signed' and 'unsigned'.</p></div>
<div class="balloon" rel="62"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v560/" target="_blank">V560</a> A part of conditional expression is always false: (0 > data->address). Unsigned type value is never < 0.</p></div>
<div class="balloon" rel="64"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2568/" target="_blank">V2568</a> Both operands of the '=' operator should have the same essential type. The current types are: 'unsigned' and 'signed'.</p></div>
<div class="balloon" rel="67"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2568/" target="_blank">V2568</a> Both operands of the '+' operator should have the same essential type. The current types are: 'signed' and 'unsigned'.</p></div>
<div class="balloon" rel="68"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2568/" target="_blank">V2568</a> Both operands of the '&' operator should have the same essential type. The current types are: 'unsigned' and 'signed'.</p></div>
<div class="balloon" rel="68"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2544/" target="_blank">V2544</a> The right operand '0xFF' of the '&' operator should not have the essential 'signed' type.</p></div>
<div class="balloon" rel="67"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2572/" target="_blank">V2572</a> The value of the '(mac >> 40) & 0xFF' expression should not be converted to the narrower essential 'unsigned' type.</p></div>
<div class="balloon" rel="70"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2568/" target="_blank">V2568</a> Both operands of the '+' operator should have the same essential type. The current types are: 'signed' and 'unsigned'.</p></div>
<div class="balloon" rel="71"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2568/" target="_blank">V2568</a> Both operands of the '&' operator should have the same essential type. The current types are: 'unsigned' and 'signed'.</p></div>
<div class="balloon" rel="71"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2544/" target="_blank">V2544</a> The right operand '0xFF' of the '&' operator should not have the essential 'signed' type.</p></div>
<div class="balloon" rel="70"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2572/" target="_blank">V2572</a> The value of the '(data->address >> 32) & 0xFF' expression should not be converted to the narrower essential 'unsigned' type.</p></div>
<div class="balloon" rel="73"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2568/" target="_blank">V2568</a> Both operands of the '+' operator should have the same essential type. The current types are: 'signed' and 'unsigned'.</p></div>
<div class="balloon" rel="74"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2568/" target="_blank">V2568</a> Both operands of the '&' operator should have the same essential type. The current types are: 'unsigned' and 'signed'.</p></div>
<div class="balloon" rel="74"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2544/" target="_blank">V2544</a> The right operand '0xFF' of the '&' operator should not have the essential 'signed' type.</p></div>
<div class="balloon" rel="73"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2572/" target="_blank">V2572</a> The value of the '(mac >> 24) & 0xFF' expression should not be converted to the narrower essential 'unsigned' type.</p></div>
<div class="balloon" rel="76"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2568/" target="_blank">V2568</a> Both operands of the '+' operator should have the same essential type. The current types are: 'signed' and 'unsigned'.</p></div>
<div class="balloon" rel="77"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2568/" target="_blank">V2568</a> Both operands of the '&' operator should have the same essential type. The current types are: 'unsigned' and 'signed'.</p></div>
<div class="balloon" rel="77"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2544/" target="_blank">V2544</a> The right operand '0xFF' of the '&' operator should not have the essential 'signed' type.</p></div>
<div class="balloon" rel="76"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2572/" target="_blank">V2572</a> The value of the '(mac >> 16) & 0xFF' expression should not be converted to the narrower essential 'unsigned' type.</p></div>
<div class="balloon" rel="79"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2568/" target="_blank">V2568</a> Both operands of the '+' operator should have the same essential type. The current types are: 'signed' and 'unsigned'.</p></div>
<div class="balloon" rel="80"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2568/" target="_blank">V2568</a> Both operands of the '&' operator should have the same essential type. The current types are: 'unsigned' and 'signed'.</p></div>
<div class="balloon" rel="80"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2544/" target="_blank">V2544</a> The right operand '0xFF' of the '&' operator should not have the essential 'signed' type.</p></div>
<div class="balloon" rel="79"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2572/" target="_blank">V2572</a> The value of the '(mac >> 8) & 0xFF' expression should not be converted to the narrower essential 'unsigned' type.</p></div>
<div class="balloon" rel="82"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2568/" target="_blank">V2568</a> Both operands of the '+' operator should have the same essential type. The current types are: 'signed' and 'unsigned'.</p></div>
<div class="balloon" rel="83"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2568/" target="_blank">V2568</a> Both operands of the '&' operator should have the same essential type. The current types are: 'unsigned' and 'signed'.</p></div>
<div class="balloon" rel="83"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2544/" target="_blank">V2544</a> The right operand '0xFF' of the '&' operator should not have the essential 'signed' type.</p></div>
<div class="balloon" rel="82"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2572/" target="_blank">V2572</a> The value of the '(mac >> 0) & 0xFF' expression should not be converted to the narrower essential 'unsigned' type.</p></div>
<div class="balloon" rel="89"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2568/" target="_blank">V2568</a> Both operands of the '=' operator should have the same essential type. The current types are: 'unsigned' and 'signed'.</p></div>
<div class="balloon" rel="92"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2544/" target="_blank">V2544</a> The '__builtin_isnan(data->humidity_rh)' operand of the '!' operator should not have the essential 'signed' type.</p></div>
<div class="balloon" rel="92"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2570/" target="_blank">V2570</a> Operands of the '!' operator should have bool essential type.</p></div>
<div class="balloon" rel="93"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2568/" target="_blank">V2568</a> Both operands of the '<=' operator should have the same essential type. The current types are: 'signed' and 'floating'.</p></div>
<div class="balloon" rel="97"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2568/" target="_blank">V2568</a> Both operands of the '*' operator should have the same essential type. The current types are: 'floating' and 'signed'.</p></div>
<div class="balloon" rel="97"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2004/" target="_blank">V2004</a> Explicit conversion from 'float' type to unsigned integer type.</p></div>
<div class="balloon" rel="101"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2572/" target="_blank">V2572</a> The value of the '(humidity >> 8)' expression should not be converted from the essential 'signed' type to the essential 'unsigned' type.</p></div>
<div class="balloon" rel="101"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2568/" target="_blank">V2568</a> Both operands of the '=' operator should have the same essential type. The current types are: 'unsigned' and 'signed'.</p></div>
<div class="balloon" rel="102"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2568/" target="_blank">V2568</a> Both operands of the '&' operator should have the same essential type. The current types are: 'unsigned' and 'signed'.</p></div>
<div class="balloon" rel="102"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2544/" target="_blank">V2544</a> The right operand '0xFF' of the '&' operator should not have the essential 'signed' type.</p></div>
<div class="balloon" rel="102"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2572/" target="_blank">V2572</a> The value of the 'humidity & 0xFF' expression should not be converted from the essential 'signed' type to the essential 'unsigned' type.</p></div>
<div class="balloon" rel="102"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2568/" target="_blank">V2568</a> Both operands of the '=' operator should have the same essential type. The current types are: 'unsigned' and 'signed'.</p></div>
<div class="balloon" rel="106"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2544/" target="_blank">V2544</a> The '__builtin_isnan(data->temperature_c)' operand of the '!' operator should not have the essential 'signed' type.</p></div>
<div class="balloon" rel="106"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2570/" target="_blank">V2570</a> Operands of the '!' operator should have bool essential type.</p></div>
<div class="balloon" rel="108"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2568/" target="_blank">V2568</a> Both operands of the '*' operator should have the same essential type. The current types are: 'floating' and 'signed'.</p></div>
<div class="balloon" rel="108"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2003/" target="_blank">V2003</a> Explicit conversion from 'float' type to signed integer type.</p></div>
<div class="balloon" rel="112"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2572/" target="_blank">V2572</a> The value of the '(temperature >> 8)' expression should not be converted from the essential 'signed' type to the essential 'unsigned' type.</p></div>
<div class="balloon" rel="112"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2568/" target="_blank">V2568</a> Both operands of the '=' operator should have the same essential type. The current types are: 'unsigned' and 'signed'.</p></div>
<div class="balloon" rel="114"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2568/" target="_blank">V2568</a> Both operands of the '&' operator should have the same essential type. The current types are: 'unsigned' and 'signed'.</p></div>
<div class="balloon" rel="114"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2544/" target="_blank">V2544</a> The right operand '0xFF' of the '&' operator should not have the essential 'signed' type.</p></div>
<div class="balloon" rel="114"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2572/" target="_blank">V2572</a> The value of the '(temperature & 0xFF)' expression should not be converted from the essential 'signed' type to the essential 'unsigned' type.</p></div>
<div class="balloon" rel="114"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2568/" target="_blank">V2568</a> Both operands of the '=' operator should have the same essential type. The current types are: 'unsigned' and 'signed'.</p></div>
<div class="balloon" rel="119"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2544/" target="_blank">V2544</a> The '__builtin_isnan(data->pressure_pa)' operand of the '!' operator should not have the essential 'signed' type.</p></div>
<div class="balloon" rel="119"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2570/" target="_blank">V2570</a> Operands of the '!' operator should have bool essential type.</p></div>
<div class="balloon" rel="120"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2568/" target="_blank">V2568</a> Both operands of the '<=' operator should have the same essential type. The current types are: 'signed' and 'floating'.</p></div>
<div class="balloon" rel="122"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2004/" target="_blank">V2004</a> Explicit conversion from 'float' type to unsigned integer type: (uint32_t) data->pressure_pa</p></div>
<div class="balloon" rel="123"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2568/" target="_blank">V2568</a> Both operands of the '-=' operator should have the same essential type. The current types are: 'unsigned' and 'signed'.</p></div>
<div class="balloon" rel="126"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2568/" target="_blank">V2568</a> Both operands of the '&' operator should have the same essential type. The current types are: 'unsigned' and 'signed'.</p></div>
<div class="balloon" rel="126"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2544/" target="_blank">V2544</a> The right operand '0xFF' of the '&' operator should not have the essential 'signed' type.</p></div>
<div class="balloon" rel="126"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2572/" target="_blank">V2572</a> The value of the '(pressure >> 8) & 0xFF' expression should not be converted to the narrower essential 'unsigned' type.</p></div>
<div class="balloon" rel="128"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2568/" target="_blank">V2568</a> Both operands of the '&' operator should have the same essential type. The current types are: 'unsigned' and 'signed'.</p></div>
<div class="balloon" rel="128"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2544/" target="_blank">V2544</a> The right operand '0xFF' of the '&' operator should not have the essential 'signed' type.</p></div>
<div class="balloon" rel="128"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2572/" target="_blank">V2572</a> The value of the '(pressure & 0xFF)' expression should not be converted to the narrower essential 'unsigned' type.</p></div>
<div class="balloon" rel="140"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2544/" target="_blank">V2544</a> The '__builtin_isnan(data->battery_v)' operand of the '!' operator should not have the essential 'signed' type.</p></div>
<div class="balloon" rel="140"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2570/" target="_blank">V2570</a> Operands of the '!' operator should have bool essential type.</p></div>
<div class="balloon" rel="145"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2568/" target="_blank">V2568</a> Both operands of the '*' operator should have the same essential type. The current types are: 'floating' and 'signed'.</p></div>
<div class="balloon" rel="145"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2568/" target="_blank">V2568</a> Both operands of the '-' operator should have the same essential type. The current types are: 'floating' and 'signed'.</p></div>
<div class="balloon" rel="145"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2004/" target="_blank">V2004</a> Explicit conversion from 'float' type to unsigned integer type.</p></div>
<div class="balloon" rel="150"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2568/" target="_blank">V2568</a> Both operands of the '!=' operator should have the same essential type. The current types are: 'signed' and 'character'.</p></div>
<div class="balloon" rel="151"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2568/" target="_blank">V2568</a> Both operands of the '>=' operator should have the same essential type. The current types are: 'character' and 'signed'.</p></div>
<div class="balloon" rel="152"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2568/" target="_blank">V2568</a> Both operands of the '<=' operator should have the same essential type. The current types are: 'character' and 'signed'.</p></div>
<div class="balloon" rel="156"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2568/" target="_blank">V2568</a> Both operands of the '/' operator should have the same essential type. The current types are: 'character' and 'signed'.</p></div>
<div class="balloon" rel="156"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2544/" target="_blank">V2544</a> The left operand '(data->tx_power + 40)' of the '/' operator should not have the essential 'character' type.</p></div>
<div class="balloon" rel="161"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2572/" target="_blank">V2572</a> The value of the '((uint16_t)(voltage << 5)) + tx_power' expression should not be converted from the essential 'character' type to the essential 'unsigned' type.</p></div>
<div class="balloon" rel="163"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2572/" target="_blank">V2572</a> The value of the '(power_info >> 8)' expression should not be converted from the essential 'signed' type to the essential 'unsigned' type.</p></div>
<div class="balloon" rel="163"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2568/" target="_blank">V2568</a> Both operands of the '=' operator should have the same essential type. The current types are: 'unsigned' and 'signed'.</p></div>
<div class="balloon" rel="164"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2568/" target="_blank">V2568</a> Both operands of the '&' operator should have the same essential type. The current types are: 'unsigned' and 'signed'.</p></div>
<div class="balloon" rel="164"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2544/" target="_blank">V2544</a> The right operand '0xFF' of the '&' operator should not have the essential 'signed' type.</p></div>
<div class="balloon" rel="164"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2572/" target="_blank">V2572</a> The value of the '(power_info & 0xFF)' expression should not be converted from the essential 'signed' type to the essential 'unsigned' type.</p></div>
<div class="balloon" rel="164"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2568/" target="_blank">V2568</a> Both operands of the '=' operator should have the same essential type. The current types are: 'unsigned' and 'signed'.</p></div>
<div class="balloon" rel="167"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2568/" target="_blank">V2568</a> Both operands of the '<' operator should have the same essential type. The current types are: 'signed' and 'unsigned'.</p></div>
<div class="balloon" rel="168"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2568/" target="_blank">V2568</a> Both operands of the '>' operator should have the same essential type. The current types are: 'signed' and 'unsigned'.</p></div>
<div class="balloon" rel="168"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v560/" target="_blank">V560</a> A part of conditional expression is always false: (0 > data->movement_count). Unsigned type value is never < 0.</p></div>
<div class="balloon" rel="170"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2568/" target="_blank">V2568</a> Both operands of the '=' operator should have the same essential type. The current types are: 'unsigned' and 'signed'.</p></div>
<div class="balloon" rel="176"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2568/" target="_blank">V2568</a> Both operands of the '<' operator should have the same essential type. The current types are: 'signed' and 'unsigned'.</p></div>
<div class="balloon" rel="177"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2568/" target="_blank">V2568</a> Both operands of the '>' operator should have the same essential type. The current types are: 'signed' and 'unsigned'.</p></div>
<div class="balloon" rel="177"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v560/" target="_blank">V560</a> A part of conditional expression is always false: (0 > data->measurement_count). Unsigned type value is never < 0.</p></div>
<div class="balloon" rel="179"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2568/" target="_blank">V2568</a> Both operands of the '=' operator should have the same essential type. The current types are: 'unsigned' and 'signed'.</p></div>
<div class="balloon" rel="182"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2572/" target="_blank">V2572</a> The value of the '(measurement_seq >> 8)' expression should not be converted from the essential 'signed' type to the essential 'unsigned' type.</p></div>
<div class="balloon" rel="182"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2568/" target="_blank">V2568</a> Both operands of the '=' operator should have the same essential type. The current types are: 'unsigned' and 'signed'.</p></div>
<div class="balloon" rel="184"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2568/" target="_blank">V2568</a> Both operands of the '&' operator should have the same essential type. The current types are: 'unsigned' and 'signed'.</p></div>
<div class="balloon" rel="184"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2544/" target="_blank">V2544</a> The right operand '0xFF' of the '&' operator should not have the essential 'signed' type.</p></div>
<div class="balloon" rel="184"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2572/" target="_blank">V2572</a> The value of the '(measurement_seq & 0xFF)' expression should not be converted from the essential 'signed' type to the essential 'unsigned' type.</p></div>
<div class="balloon" rel="184"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2568/" target="_blank">V2568</a> Both operands of the '=' operator should have the same essential type. The current types are: 'unsigned' and 'signed'.</p></div>

<link rel="stylesheet" href="highlight.css">
<script src="highlight.pack.js"></script>
<script src="highlightjs-line-numbers.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script>hljs.initLineNumbersOnLoad();</script>
<script>
  $(document).ready(function() {
      $('.balloon').each(function () {
          var bl = $(this);
          var line = bl.attr('rel');
          var text = $('a[name="ln'+line+'"]').text();

          var space_count = 0;
          for(var i = 0; i<text.length; i++){
              var char = text[i];
              if((char !== ' ')&&(char !== '\t'))break;
              if(char === '\t')space_count++;
              space_count++;
          }

          bl.css('margin-left', space_count*8);
          $('a[name="ln'+line+'"]').after(bl);
      });

      window.location = window.location;
  });
</script>
</body>
</html>
